<html>

<head>
 <title>John Mills</title>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width">
 <link rel="stylesheet" href="https://iamjohnmills.github.io/journal/assets/site.css" />
 <script src="https://iamjohnmills.github.io/journal/assets/site.js"></script>
</head>

<body>
 <header>
  <div data-toggle-nav="true">
   <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path fill="#33363F" d="m4 10-.707.707L2.586 10l.707-.707L4 10Zm17 8a1 1 0 1 1-2 0h2ZM8.293 15.707l-5-5 1.414-1.414 5 5-1.414 1.414Zm-5-6.414 5-5 1.414 1.414-5 5-1.414-1.414ZM4 9h10v2H4V9Zm17 7v2h-2v-2h2Zm-7-7a7 7 0 0 1 7 7h-2a5 5 0 0 0-5-5V9Z" />
   </svg> More Articles
  </div>
  <a class="button" href="https://iamjohnmills.github.io/journal/johnmills.rss">
   <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 100 100" xml:space="preserve">
    <path d="M26.258 64.949a8.78 8.78 0 0 0-8.78 8.784 8.782 8.782 0 1 0 17.564 0 8.78 8.78 0 0 0-8.784-8.784z" />
    <path d="M23.536 40.801c-.046 0-.09.006-.135.007v-.007h-3.464v.039a3.437 3.437 0 0 0-3.056 3.344h-.007v6.159h.041a3.43 3.43 0 0 0 3.021 3.002v.039H23.4v-.048c.045.001.09.007.135.007 12.772 0 23.173 10.321 23.311 23.061h-.033v3.464h.039a3.437 3.437 0 0 0 3.344 3.056v.007h6.158v-.041a3.43 3.43 0 0 0 3.002-3.021h.039v-3.464h-.006c-.137-19.657-16.166-35.604-35.853-35.604z" />
    <path d="M83.119 76.403C82.98 43.664 56.308 17.07 23.536 17.07c-.046 0-.09.006-.135.007v-.007h-3.464v.039a3.437 3.437 0 0 0-3.056 3.344h-.007v6.159h.041a3.429 3.429 0 0 0 3.021 3.002v.039H23.4v-.048c.045.001.09.007.135.007 25.857 0 46.902 20.967 47.041 46.792h-.035v3.464h.039a3.437 3.437 0 0 0 3.344 3.056v.007h6.159v-.041a3.43 3.43 0 0 0 3.002-3.021h.039v-3.464h-.005z" />
   </svg> RSS </a>
 </header>
 <main>
  <nav>
   <span>I mostly post minimal experiments, tips, and tricks. Keep up-to-date with me and subscribe to my <a href="https://iamjohnmills.github.io/journal/johnmills.rss" target="_blank">RSS Feed</a></span>
   <a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;animated-nav-icon&#x2F;">Animated Nav Menu</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;vector-earth&#x2F;">Vector Earth 3D</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;giftv&#x2F;">GifTV</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;shaders&#x2F;">WebGL shaders</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;n64&#x2F;">Spinning N64 logo</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;chat-bubbles&#x2F;">Chat bubbles</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;canvas-video&#x2F;">Video to canvas</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;90s-shapes&#x2F;">90s abstract shapes</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;equalizer&#x2F;">Animated equalizer</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;synthwave-highway&#x2F;">Synthwave highway</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;plasma&#x2F;">Plasma</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;matrix&#x2F;">Matrix</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;cursor-follow&#x2F;">Follow mouse cursor</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;game-of-life&#x2F;">Game of life</a><a href="https:&#x2F;&#x2F;iamjohnmills.github.io&#x2F;journal&#x2F;create-node&#x2F;">My one-function JS framework</a>
  </nav>
  <section>
   <p>Jan 2023</p>
   <h1>Game of life</h1>
   <p>Here I make a performant game of life clone in Javascript on canvas.</p>
   <pre data-code="%3Chtml%3E%0A%20%20%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22utf-8%22%3E%0A%20%20%20%20%3Ctitle%3EGame%20of%20Life%3C%2Ftitle%3E%0A%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20html%2Cbody%20%7B%20margin%3A%200%3B%20overflow%3A%20hidden%3B%20height%3A%20100%25%3B%20%7D%0A%20%20%20%20%20%20%23root%20%7B%20display%3A%20flex%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20%7D%0A%20%20%20%20%20%20canvas%20%7B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20image-rendering%3A%20pixelated%20%7D%0A%20%20%20%20%3C%2Fstyle%3E%0A%20%20%20%20%3Cscript%3E%0A%20%20%20%20%20%20const%20createNode%20%3D%20(options)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20node%20%3D%20document.createElement(options.tag)%3B%0A%20%20%20%20%20%20%20%20options.root.appendChild(node)%3B%0A%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20class%20App%20%7B%0A%20%20%20%20%20%20%20%20constructor()%7B%0A%20%20%20%20%20%20%20%20%20%20document.addEventListener('DOMContentLoaded'%2Cthis.init.bind(this))%3B%0A%20%20%20%20%20%20%20%20%20%20window.addEventListener('resize'%2Cthis.init.bind(this))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20init()%7B%0A%20%20%20%20%20%20%20%20%20%20if(this.frame_timeout)%20clearTimeout(this.frame_timeout)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20if(this.interval)%20cancelAnimationFrame(this.interval)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ratio%20%3D%20window.innerHeight%20%2F%20window.innerWidth%3B%0A%20%20%20%20%20%20%20%20%20%20this.width%20%3D%20window.innerWidth%20%3E%20900%20%3F%20400%20%3A%20window.innerWidth%20%3E%20500%20%3F%20300%20%3A%20200%3B%0A%20%20%20%20%20%20%20%20%20%20this.height%20%3D%20Math.floor(this.width%20*%20ratio)%3B%0A%20%20%20%20%20%20%20%20%20%20this.size%20%3D%20this.width%20*%20this.height%3B%0A%20%20%20%20%20%20%20%20%20%20this.root%20%3D%20document.getElementById('root')%3B%0A%20%20%20%20%20%20%20%20%20%20this.root.innerHTML%20%3D%20%60%60%3B%0A%20%20%20%20%20%20%20%20%20%20this.canvas%20%3D%20createNode(%7B%20root%3A%20this.root%2C%20tag%3A%20'canvas'%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20this.canvas.width%20%3D%20this.width%3B%0A%20%20%20%20%20%20%20%20%20%20this.canvas.height%20%3D%20this.height%3B%0A%20%20%20%20%20%20%20%20%20%20this.context%20%3D%20this.canvas.getContext('2d')%3B%0A%20%20%20%20%20%20%20%20%20%20this.pixels%20%3D%20new%20Uint8Array(this.size%20*%204)%3B%0A%20%20%20%20%20%20%20%20%20%20for(let%20i%20%3D%200%3B%20i%20%3C%20this.size%3B%20i%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20i%20*%204%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20color%20%3D%20Math.random()%20%3E%200.5%20%3F%200%20%3A%20255%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(let%20z%20%3D%200%3B%20z%20%3C%204%3B%20z%2B%2B)%20this.pixels%5Bindex%20%2B%20z%5D%20%3D%20z%20%3D%3D%3D%203%20%3F%20255%20%3A%20color%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.frame_timeout%20%3D%20setTimeout(this.render.bind(this)%2C6)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20this.interval%20%3D%20window.requestAnimationFrame(this.render.bind(this))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20update()%7B%0A%20%20%20%20%20%20%20%20%20%20const%20new_pixels%20%3D%20new%20Uint8Array(this.size%20*%204)%3B%0A%20%20%20%20%20%20%20%20%20%20for(let%20i%20%3D%200%3B%20i%20%3C%20this.size%3B%20i%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20i%20*%204%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20width_offset%20%3D%20this.width%20*%204%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20matrix%20%3D%20%5Bindex%20-%204%2C%20index%20-%20width_offset%20-%204%2C%20index%20-%20width_offset%2C%20index%20-%20width_offset%20%2B%204%2C%20index%20%2B%204%2C%20index%20%2B%20width_offset%20%2B%204%2C%20index%20%2B%20width_offset%2C%20index%20%2B%20width_offset%20-%204%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20neighbors%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(const%20entry%20of%20matrix)%20neighbors%20%3D%20this.pixels%5Bentry%5D%20%3D%3D%3D%20255%20%3F%20neighbors%20%2B%201%20%3A%20neighbors%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(this.pixels%5Bindex%5D%20%3D%3D%3D%200%20%26%26%20neighbors%20%3D%3D%3D%203)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(let%20z%20%3D%200%3B%20z%20%3C%204%3B%20z%2B%2B)%20new_pixels%5Bindex%20%2B%20z%5D%20%3D%20255%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(this.pixels%5Bindex%5D%20%3D%3D%3D%20255%20%26%26%20(neighbors%20%3C%202%20%7C%7C%20neighbors%20%3E%203)%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(let%20z%20%3D%200%3B%20z%20%3C%204%3B%20z%2B%2B)%20new_pixels%5Bindex%20%2B%20z%5D%20%3D%20z%20%3D%3D%3D%203%20%3F%20255%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(let%20z%20%3D%200%3B%20z%20%3C%204%3B%20z%2B%2B)%20new_pixels%5Bindex%20%2B%20z%5D%20%3D%20z%20%3D%3D%3D%203%20%3F%20255%20%3A%20this.pixels%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if(i%20%3D%3D%3D%20this.size%20-%201)%20this.pixels%20%3D%20new_pixels%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20async%20render()%7B%0A%20%20%20%20%20%20%20%20%20%20await%20this.update()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20pixels_uac%20%3D%20new%20Uint8ClampedArray(this.pixels%2Cthis.width%2Cthis.height)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20pixel_data%20%3D%20new%20ImageData(pixels_uac%2Cthis.width%2Cthis.height)%0A%20%20%20%20%20%20%20%20%20%20this.context.putImageData(pixel_data%2C0%2C0)%3B%0A%20%20%20%20%20%20%20%20%20%20this.frame_timeout%20%3D%20setTimeout(this.render.bind(this)%2C6)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20this.interval%20%3D%20window.requestAnimationFrame(this.render.bind(this))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20app%20%3D%20new%20App()%3B%0A%20%20%20%20%3C%2Fscript%3E%0A%20%20%3C%2Fhead%3E%0A%20%20%3Cbody%3E%0A%20%20%20%20%3Cdiv%20id%3D%22root%22%3E%3C%2Fdiv%3E%0A%20%20%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A"><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Game of Life<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">
      <span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">overflow</span>: hidden; <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>; }
      <span class="hljs-selector-id">#root</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">justify-content</span>: center; }
      <span class="hljs-selector-tag">canvas</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">image-rendering</span>: pixelated }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">createNode</span> = (<span class="hljs-params">options</span>) =&gt; {
        <span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(options.<span class="hljs-property">tag</span>);
        options.<span class="hljs-property">root</span>.<span class="hljs-title function_">appendChild</span>(node);
        <span class="hljs-keyword">return</span> node;
      }
      <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> {
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>){
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">init</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
          <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;resize&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">init</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
        }
        <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>){
          <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">frame_timeout</span>) <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">frame_timeout</span>);
          <span class="hljs-comment">// if(this.interval) cancelAnimationFrame(this.interval);</span>
          <span class="hljs-keyword">const</span> ratio = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &gt; <span class="hljs-number">900</span> ? <span class="hljs-number">400</span> : <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &gt; <span class="hljs-number">500</span> ? <span class="hljs-number">300</span> : <span class="hljs-number">200</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> * ratio);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">``</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = <span class="hljs-title function_">createNode</span>({ <span class="hljs-attr">root</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>, <span class="hljs-attr">tag</span>: <span class="hljs-string">&#x27;canvas&#x27;</span> });
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">width</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">height</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;2d&#x27;</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> * <span class="hljs-number">4</span>);
          <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span>; i++){
            <span class="hljs-keyword">const</span> index = i * <span class="hljs-number">4</span>;
            <span class="hljs-keyword">const</span> color = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">255</span>;
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z = <span class="hljs-number">0</span>; z &lt; <span class="hljs-number">4</span>; z++) <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span>[index + z] = z === <span class="hljs-number">3</span> ? <span class="hljs-number">255</span> : color;
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">frame_timeout</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-number">6</span>);
          <span class="hljs-comment">// this.interval = window.requestAnimationFrame(this.render.bind(this));</span>
        }
        <span class="hljs-title function_">update</span>(<span class="hljs-params"></span>){
          <span class="hljs-keyword">const</span> new_pixels = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> * <span class="hljs-number">4</span>);
          <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span>; i++){
            <span class="hljs-keyword">const</span> index = i * <span class="hljs-number">4</span>;
            <span class="hljs-keyword">const</span> width_offset = <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> * <span class="hljs-number">4</span>;
            <span class="hljs-keyword">const</span> matrix = [index - <span class="hljs-number">4</span>, index - width_offset - <span class="hljs-number">4</span>, index - width_offset, index - width_offset + <span class="hljs-number">4</span>, index + <span class="hljs-number">4</span>, index + width_offset + <span class="hljs-number">4</span>, index + width_offset, index + width_offset - <span class="hljs-number">4</span>];
            <span class="hljs-keyword">let</span> neighbors = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> matrix) neighbors = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span>[entry] === <span class="hljs-number">255</span> ? neighbors + <span class="hljs-number">1</span> : neighbors;
            <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span>[index] === <span class="hljs-number">0</span> &amp;&amp; neighbors === <span class="hljs-number">3</span>){
              <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z = <span class="hljs-number">0</span>; z &lt; <span class="hljs-number">4</span>; z++) new_pixels[index + z] = <span class="hljs-number">255</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span>[index] === <span class="hljs-number">255</span> &amp;&amp; (neighbors &lt; <span class="hljs-number">2</span> || neighbors &gt; <span class="hljs-number">3</span>) ) {
              <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z = <span class="hljs-number">0</span>; z &lt; <span class="hljs-number">4</span>; z++) new_pixels[index + z] = z === <span class="hljs-number">3</span> ? <span class="hljs-number">255</span> : <span class="hljs-number">0</span>;
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> z = <span class="hljs-number">0</span>; z &lt; <span class="hljs-number">4</span>; z++) new_pixels[index + z] = z === <span class="hljs-number">3</span> ? <span class="hljs-number">255</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span>[index];
            }
            <span class="hljs-keyword">if</span>(i === <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> - <span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span> = new_pixels;
          }
        }
        <span class="hljs-keyword">async</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>){
          <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">update</span>();
          <span class="hljs-keyword">const</span> pixels_uac = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8ClampedArray</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixels</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
          <span class="hljs-keyword">const</span> pixel_data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageData</span>(pixels_uac,<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">putImageData</span>(pixel_data,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">frame_timeout</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-number">6</span>);
          <span class="hljs-comment">// this.interval = window.requestAnimationFrame(this.render.bind(this));</span>
        }
      }
      <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">App</span>();
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
   <p>&quot;If the cell is alive, then it stays alive if it has either 2 or 3 live neighbors. If the cell is dead, then it springs to life only in the case that it has 3 live neighbors.&quot;</p>
   <p>Here the rules for the algorithm are defined. The pixels are first randomized and the logic is applied on each requestAnimationFrame. Each pixel is represented in a repeating series of 4 indexes of a Uint8Array.</p>
   <p>Each draw to the canvas negatively effects performance, so what makes this performant is the simplicity of the colors and manipulating the array of pixels before drawing to the canvas.</p>
   <aside>
    <figure>
     <img src="https://iamjohnmills.github.io/journal/assets/jm-photo-2023.jpg" />
    </figure>
    <p>I'm John Mills, a professional frontend engineer. Here I share my experiences and journeys with all of you. Check out all my projects on <a href="https://github.com/iamjohnmills" target="_blank">Github</a>. Message or connect with me on <a href="https://www.linkedin.com/in/iamjohnmills" target="_blank">LinkedIn</a>. I'm a proud dad of my two daughters, cook sometimes, and am interested in a ton of weird stuff.</p>
   </aside>
  </section>
 </main>
</body>

</html>